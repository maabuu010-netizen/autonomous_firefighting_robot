# ‚ö° QUICK REFERENCE - MAPPING COMMANDS\n\n## **1Ô∏è‚É£ KH·ªûI ƒê·ªòNG MAPPING - 5 B∆Ø·ªöC**\n\n### Terminal 1: Robot State Publisher\n```bash\ncd ~/ros2_ws && source install/setup.bash\nros2 launch articubot_one rsp.launch.py use_sim_time:=false use_ros2_control:=false\n```\n\n### Terminal 2: LiDAR\n```bash\ncd ~/ros2_ws && source install/setup.bash\nros2 launch articubot_one rplidar.launch.py\n```\n\n### Terminal 3: SLAM Toolbox\n```bash\ncd ~/ros2_ws && source install/setup.bash\nros2 launch articubot_one online_async_launch.py use_sim_time:=false\n```\n\n### Terminal 4: RViz\n```bash\ncd ~/ros2_ws\nrviz2 -d src/articubot_one/config/map.rviz\n```\n\n### Terminal 5: Joystick (ho·∫∑c Manual Command)\n```bash\n# Option A: Joystick\ncd ~/ros2_ws && source install/setup.bash\nros2 launch articubot_one joystick.launch.py use_sim_time:=false\n\n# Option B: Manual command\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist \"{linear: {x: 0.1, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0}}\"\n```\n\n---\n\n## **2Ô∏è‚É£ KI·ªÇM TRA MAPPING**\n\n### Ki·ªÉm tra LiDAR ho·∫°t ƒë·ªông\n```bash\nros2 topic list | grep scan\nros2 topic echo /scan --once\nros2 topic hz /scan  # Ph·∫£i th·∫•y ~8 Hz\n```\n\n### Ki·ªÉm tra Map topic\n```bash\nros2 topic list | grep map\nros2 topic hz /map  # Ph·∫£i th·∫•y > 0.5 Hz\n```\n\n### Ki·ªÉm tra Transform\n```bash\nros2 run tf2_tools view_frames\nros2 run tf2_ros tf2_monitor map base_footprint\n```\n\n### Ki·ªÉm tra SLAM Toolbox ch·∫°y\n```bash\nros2 node list | grep slam\nps aux | grep async_slam\n```\n\n---\n\n## **3Ô∏è‚É£ ƒêI·ªÄU KHI·ªÇN ROBOT**\n\n### ƒêi th·∫≥ng\n```bash\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist \"{linear: {x: 0.2, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0}}\"\n```\n\n### Quay v√≤ng (t·∫°i ch·ªó)\n```bash\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist \"{linear: {x: 0, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0.5}}\"\n```\n\n### ƒêi ngo·∫£nh (cua)\n```bash\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist \"{linear: {x: 0.1, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0.3}}\"\n```\n\n### D·ª´ng\n```bash\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist \"{linear: {x: 0, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0}}\"\n```\n\n---\n\n## **4Ô∏è‚É£ L∆ØU B·∫¢N ƒê·ªí**\n\n### C√°ch 1: Service call\n```bash\nros2 service call /slam_toolbox/save_map slam_toolbox/srv/SaveMap \"{name: {data: '/home/pi/my_map'}}\"\n```\n\n### C√°ch 2: Ki·ªÉm tra b·∫£n ƒë·ªì ƒë√£ l∆∞u\n```bash\nls -la ~/my_map.*\n# Ph·∫£i th·∫•y: my_map.pgm, my_map.yaml\n```\n\n### C√°ch 3: Xem b·∫£n ƒë·ªì\n```bash\neog ~/my_map.pgm\n# ho·∫∑c\nfeh ~/my_map.pgm\n```\n\n---\n\n## **5Ô∏è‚É£ C·∫§U H√åNH SLAM (S·ª≠a file)**\n\n### M·ªü file c·∫•u h√¨nh\n```bash\nnano ~/ros2_ws/src/articubot_one/config/mapper_params_online_async.yaml\n```\n\n### C√°c tham s·ªë quan tr·ªçng\n```yaml\n# Ch·∫ø ƒë·ªô\nmode: mapping              # ho·∫∑c localization\n\n# Sensor\nscan_topic: /scan\nmax_laser_range: 20.0\n\n# ƒê·ªô ph√¢n gi·∫£i\nresolution: 0.05\n\n# Kho·∫£ng c√°ch gi·ªØa scan\nminimum_travel_distance: 0.5\nminimum_travel_heading: 0.5\n\n# Loop closing\ndo_loop_closing: true\nloop_search_maximum_distance: 3.0\n```\n\n### L∆∞u & kh·ªüi ƒë·ªông l·∫°i\n```bash\n# Ctrl+O, Enter, Ctrl+X (nano)\n# R·ªìi:\nros2 launch articubot_one online_async_launch.py use_sim_time:=false\n```\n\n---\n\n## **6Ô∏è‚É£ G·ª† L·ªñI**\n\n### Kh√¥ng th·∫•y /scan\n```bash\nlsusb  # Ki·ªÉm tra LiDAR k·∫øt n·ªëi\nls -la /dev/ttyUSB*  # Ki·ªÉm tra c·ªïng\nros2 launch articubot_one rplidar.launch.py --log-level DEBUG\n```\n\n### Kh√¥ng th·∫•y /map\n```bash\nros2 node list | grep slam\n# N·∫øu kh√¥ng th·∫•y ‚Üí SLAM ch∆∞a ch·∫°y\nros2 launch articubot_one online_async_launch.py use_sim_time:=false\n```\n\n### Transform error\n```bash\nros2 run tf2_tools view_frames\nevince frames.pdf\n```\n\n### Map b·ªã m√©o\n```bash\n# D·ª´ng SLAM (Ctrl+C)\n# Di chuy·ªÉn robot tr·ªü l·∫°i start\n# B·∫≠t l·∫°i:\nros2 launch articubot_one online_async_launch.py use_sim_time:=false\n```\n\n### Loop closing kh√¥ng ho·∫°t ƒë·ªông\n```yaml\n# TƒÉng search distance\nloop_search_maximum_distance: 5.0\n\n# Ho·∫∑c gi·∫£m tin c·∫≠y\nloop_match_minimum_response_coarse: 0.25\nloop_match_minimum_response_fine: 0.35\n```\n\n---\n\n## **7Ô∏è‚É£ M√î PH·ªéNG TRONG GAZEBO**\n\n### Terminal 1: Gazebo\n```bash\ncd ~/ros2_ws && source install/setup.bash\nros2 launch articubot_one launch_sim.launch.py\n```\n\n### Terminal 2: SLAM\n```bash\ncd ~/ros2_ws && source install/setup.bash\nros2 launch articubot_one online_async_launch.py use_sim_time:=true\n```\n\n### Terminal 3: RViz\n```bash\nrviz2 -d ~/ros2_ws/src/articubot_one/config/map.rviz\n```\n\n### Terminal 4: ƒêi·ªÅu khi·ªÉn\n```bash\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist \"{linear: {x: 0.1, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0}}\"\n```\n\n---\n\n## **8Ô∏è‚É£ NAVIGATION (ƒêi·ªÅu h∆∞·ªõng t·ª± ƒë·ªông)**\n\n### B∆∞·ªõc 1: Load b·∫£n ƒë·ªì ƒë√£ l∆∞u\n```yaml\n# S·ª≠a mapper_params_online_async.yaml\nmode: localization\nmap_file_name: /home/pi/my_map\n```\n\n### B∆∞·ªõc 2: Kh·ªüi ƒë·ªông navigation\n```bash\nros2 launch articubot_one navigation_launch.py use_sim_time:=false\n```\n\n### B∆∞·ªõc 3: Set initial pose (ƒëi·ªÉm b·∫Øt ƒë·∫ßu)\nTrong RViz:\n1. \"2D Pose Estimate\" button\n2. Nh·∫•n t·∫°i v·ªã tr√≠ start tr√™n b·∫£n ƒë·ªì\n3. K√©o ƒë·ªÉ ch·ªâ h∆∞·ªõng\n\n### B∆∞·ªõc 4: Set goal (ƒëi·ªÉm ƒë√≠ch)\nTrong RViz:\n1. \"Nav2 Goal\" button (ho·∫∑c \"2D Nav Goal\")\n2. Nh·∫•n t·∫°i v·ªã tr√≠ ƒë√≠ch\n3. K√©o ƒë·ªÉ ch·ªâ h∆∞·ªõng\n4. Robot s·∫Ω t·ª± ƒë·ªông ƒëi!\n\n---\n\n## **9Ô∏è‚É£ TOPICS & SERVICES**\n\n### Topics SLAM publish\n```\n/map                 - B·∫£n ƒë·ªì 2D (OccupancyGrid)\n/map_metadata        - Metadata b·∫£n ƒë·ªì\n/tf                  - Transform (map ‚Üí base_footprint)\n/tf_static          - Static transform\n```\n\n### Topics SLAM subscribe\n```\n/scan               - LiDAR data\n```\n\n### Services SLAM\n```\n/slam_toolbox/save_map      - L∆∞u b·∫£n ƒë·ªì\n/slam_toolbox/clear_queue   - X√≥a scan queue\n/slam_toolbox/toggle_interactive_mode  - B·∫≠t/t·∫Øt interactive\n```\n\n---\n\n## **üîü MAPPING STRATEGY (C√°ch mapping t·ªët nh·∫•t)**\n\n### B∆∞·ªõc 1: Quay v√≤ng (360¬∞)\n```bash\n# T·∫°i ch·ªó b·∫Øt ƒë·∫ßu, quay v√≤ng ƒë·ªÉ SLAM \"h·ªçc\" m√¥i tr∆∞·ªùng\nfor i in {1..3}; do\n  ros2 topic pub /cmd_vel geometry_msgs/msg/Twist \\\n    \"{linear: {x: 0, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0.3}}\"\n  sleep 20\ndone\n```\n\n### B∆∞·ªõc 2: ƒêi h√¨nh xo·∫Øn qua khu v·ª±c\n```bash\n# T·ª´ng t·ª´ di chuy·ªÉn qua c√°c n∆°i\nros2 topic pub -r 10 /cmd_vel geometry_msgs/msg/Twist \\\n  \"{linear: {x: 0.1, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0.2}}\"\n```\n\n### B∆∞·ªõc 3: Quay v√≤ng ·ªü c√°c ƒëi·ªÉm quan tr·ªçng\n```bash\n# T·∫°i c√°c n√∫t giao, quay v√≤ng\nros2 topic pub -r 10 /cmd_vel geometry_msgs/msg/Twist \\\n  \"{linear: {x: 0, y: 0, z: 0}, angular: {x: 0, y: 0, z: 0.5}}\"\n```\n\n### B∆∞·ªõc 4: Quay l·∫°i ƒëi·ªÉm start (Loop closing)\n```bash\n# Khi quay l·∫°i start ‚Üí b·∫£n ƒë·ªì s·∫Ω \"kh√©p l·∫°i\"\n```\n\n---\n\n## **‚≠ê QUICK START (Copy-Paste)**\n\n**Kh·ªüi ƒë·ªông t·∫•t c·∫£ trong 1 terminal** (l√¢u nh·∫•t l·∫ßn ƒë·∫ßu):\n```bash\ncd ~/ros2_ws\nsource install/setup.bash\n\n# Terminal 1\nros2 launch articubot_one rsp.launch.py use_sim_time:=false use_ros2_control:=false &\nsleep 2\n\n# Terminal 2\nros2 launch articubot_one rplidar.launch.py &\nsleep 2\n\n# Terminal 3\nros2 launch articubot_one online_async_launch.py use_sim_time:=false &\nsleep 2\n\n# Terminal 4\nrviz2 -d src/articubot_one/config/map.rviz &\n```\n\n**Ho·∫∑c t·ª´ng terminal ri√™ng** (Khuy·∫øn ngh·ªã):\n```bash\n# M·ªói terminal ch·∫°y 1 l·ªánh:\n# T1: ros2 launch articubot_one rsp.launch.py ...\n# T2: ros2 launch articubot_one rplidar.launch.py\n# T3: ros2 launch articubot_one online_async_launch.py ...\n# T4: rviz2 -d ...\n# T5: [Joystick ho·∫∑c manual commands]\n```\n\n---\n\n## **üìã CHECKLIST MAPPING**\n\n- [ ] SSH/Console k·∫øt n·ªëi v·ªõi Pi\n- [ ] `source ~/ros2_ws/install/setup.bash`\n- [ ] Terminal 1: RSP ch·∫°y (th·∫•y \"Publishing transforms\")\n- [ ] Terminal 2: LiDAR ch·∫°y (th·∫•y \"Publishing scan data\")\n- [ ] Terminal 3: SLAM ch·∫°y (th·∫•y \"Starting SLAM\")\n- [ ] Terminal 4: RViz m·ªü, th·∫•y map\n- [ ] RViz Global Frame = \"map\"\n- [ ] RViz c√≥ Map layer (xanh/x√°m)\n- [ ] RViz c√≥ LaserScan layer (ƒë·ªè/v√†ng)\n- [ ] Di chuy·ªÉn robot ‚Üí map update\n- [ ] Kh√¥ng th·∫•y TF error ‚Üí transform OK\n- [ ] T·∫•t c·∫£ OK ‚Üí **B·∫ÆT ƒê·∫¶U MAPPING!**\n\n---\n\n**L∆∞u √Ω**: Thay `0.1`, `0.3` trong linear.x, angular.z ƒë·ªÉ ƒëi·ªÅu ch·ªânh t·ªëc ƒë·ªô! üöÄ\n"
